<MyLabelBox>:
    orientation: "vertical"
    padding: [dp(0), dp(0), dp(0), dp(0)]

    # Title label positioned above and outside of the main canvas box
    MDLabel:
        text: root.title_text
        font_size: sp(15)
        halign: "left"
        valign: "top"
        size_hint_y: None
        height: dp(20)
        pos_hint: {"x": 0, "top": 1}

    # Main content box with rounded corners
    MDBoxLayout:
        canvas.before:
            Color:
                rgba: root.box_color
            RoundedRectangle:
                pos: self.pos
                size: self.size
                radius: [0, 20, 0, 20]

        MDLabel:
            text: root.main_text
            text_color: 0, 0, 0, 1
            bold: True
            halign: "center"
            valign: "center"
            theme_text_color: "Custom"
            opacity: root.main_text_opacity  # Control visibility with a property

<ExerciseScreen>:
    MDBoxLayout:
        id: container
        orientation: 'vertical'
        spacing: 5
        padding: 10

        # https://rgbcolorpicker.com/0-1
        MyLabelBox:
            id: information_label
            box_color: 0.0, 0.75, 0.71, 1 # Slate Grey background
            title_text: "Information"
            main_text: ""
            main_text_opacity: "0"
        
        MDBoxLayout:
            id: container_information
            orientation: 'vertical'
            MDCard:
                id: information_image_card
                orientation: 'vertical'
                size_hint_y: 2
                Image:
                    id: information_image
                    source: ""
                    size_hint_y: 2
                    allow_stretch: True
                    keep_ratio: True
        
        MyLabelBox:
            id: character_label
            box_color: 0.94, 0.52, 0.38, 1  # Turquoise background
            title_text: "Character"
            main_text: ""
            main_text_opacity: "0"

        MyLabelBox:
            id: action_label
            box_color: 0.98, 0.82, 0.44, 1  # Turquoise background
            title_text: "Action"
            main_text: ""
            main_text_opacity: "0"

        MyLabelBox:
            id: object_label
            box_color: 0.76, 0.69, 0.91, 1  # Turquoise background
            title_text: "Object"
            main_text: ""
            main_text_opacity: "0"
       
        MDBoxLayout:
            id: container_pao
            orientation: 'vertical'
            MDCard:
                id: pao_image_card
                orientation: 'vertical'
                size_hint_y: 2
                Image:
                    id: pao_image
                    source: ""
                    size_hint_y: 2
                    allow_stretch: True
                    keep_ratio: True

        MDBoxLayout:
            size_hint_y: 0.5
            pos_hint: {"center_x": 0.5, "center_y": 0.5}
            MDRaisedButton:
                id: show_solution_button
                text: "Show Solution"
                on_release: root.show_solution()  # Show the PAO details

        MDBoxLayout:
            size_hint_y: 0.5
            orientation: 'horizontal'
            pos_hint: {"center_x": 0.5, "center_y": 0.5}
            spacing: 10
            MDRaisedButton:
                id: right_button
                text: "Right"
                disabled: True
                on_release: root.record_response('right')
            MDRaisedButton:
                id: wrong_button
                text: "Wrong"
                disabled: True
                on_release: root.record_response('wrong')
            MDRaisedButton:
                id: difficult_button
                text: "Right but Difficult"
                disabled: True
                on_release: root.record_response('difficult')